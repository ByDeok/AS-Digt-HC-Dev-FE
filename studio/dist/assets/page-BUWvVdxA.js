import{p as w,l as C,q as N,r as m,j as s,C as y,n as F,o as S,s as v,k as L,B as k,L as E,t as I}from"./index-ClgdERjX.js";import{u as z,F as B,a as c,b as d,c as u,d as x,e as p,l as M,s as P,z as r}from"./authService-C_N_zCQt.js";import{I as h}from"./input-DrzNnfUm.js";import"./label-BJHdrC9w.js";import"./api-DZjyy_ef.js";const T=r.object({email:r.string().min(1,"아이디(이메일) 또는 admin 을 입력해주세요.").refine(a=>a==="admin"||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),"이메일 형식이 올바르지 않습니다. (또는 admin)"),password:r.string().min(1,"비밀번호를 입력해주세요.")});function R(){const{toast:a}=w(),j=C(),o=N(),[i,l]=m.useState(!1),f=m.useMemo(()=>{var t;const e=o.state;return((t=e==null?void 0:e.from)==null?void 0:t.pathname)||"/dashboard"},[o.state]),n=z({resolver:P(T),defaultValues:{email:"",password:""},mode:"onSubmit"}),g=async e=>{l(!0);try{const t=await M(e);I(t),a({title:"로그인 성공",description:`${t.user.name}님, 환영합니다.`}),j(f,{replace:!0})}catch(t){const b=t instanceof Error?t.message:"로그인에 실패했습니다.";a({title:"로그인 실패",description:b,variant:"destructive"})}finally{l(!1)}};return s.jsx("main",{className:"flex min-h-screen w-full items-center justify-center bg-background p-6",children:s.jsxs(y,{className:"w-full max-w-md",children:[s.jsxs(F,{className:"text-center",children:[s.jsx(S,{className:"text-2xl font-headline",children:"로그인"}),s.jsx(v,{children:"기존 계정으로 로그인하세요."})]}),s.jsxs(L,{className:"space-y-4",children:[s.jsx(B,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(g),className:"space-y-4",children:[s.jsx(c,{control:n.control,name:"email",render:({field:e})=>s.jsxs(d,{children:[s.jsx(u,{children:"아이디(이메일 또는 admin)"}),s.jsx(x,{children:s.jsx(h,{placeholder:"admin 또는 name@example.com",autoComplete:"email",...e})}),s.jsx(p,{})]})}),s.jsx(c,{control:n.control,name:"password",render:({field:e})=>s.jsxs(d,{children:[s.jsx(u,{children:"비밀번호"}),s.jsx(x,{children:s.jsx(h,{type:"password",autoComplete:"current-password",...e})}),s.jsx(p,{})]})}),s.jsx(k,{type:"submit",className:"w-full",size:"xl",disabled:i,children:i?"로그인 중...":"로그인"})]})}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["계정이 없으신가요?"," ",s.jsx(E,{className:"text-primary underline underline-offset-4",to:"/signup",children:"회원가입"})]})]})]})})}export{R as default};
