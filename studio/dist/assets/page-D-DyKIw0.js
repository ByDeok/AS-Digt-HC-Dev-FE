import{p as w,k as C,q as N,r as c,j as s,C as y,m as F,n as S,s as v,o as L,B as k,L as E,t as I}from"./index-CYxau8sd.js";import{u as z,F as B,a as m,b as d,c as u,d as x,e as p,l as M,s as P,z as r}from"./authService-yGxDkwap.js";import{I as h}from"./label-Bp9CGYzI.js";const T=r.object({email:r.string().email("이메일 형식이 올바르지 않습니다."),password:r.string().min(1,"비밀번호를 입력해주세요.")});function H(){const{toast:n}=w(),j=C(),o=N(),[i,l]=c.useState(!1),f=c.useMemo(()=>{var a;const e=o.state;return((a=e==null?void 0:e.from)==null?void 0:a.pathname)||"/dashboard"},[o.state]),t=z({resolver:P(T),defaultValues:{email:"",password:""},mode:"onSubmit"}),g=async e=>{l(!0);try{const a=await M(e);I(a),n({title:"로그인 성공",description:`${a.user.name}님, 환영합니다.`}),j(f,{replace:!0})}catch(a){const b=a instanceof Error?a.message:"로그인에 실패했습니다.";n({title:"로그인 실패",description:b,variant:"destructive"})}finally{l(!1)}};return s.jsx("main",{className:"flex min-h-screen w-full items-center justify-center bg-background p-6",children:s.jsxs(y,{className:"w-full max-w-md",children:[s.jsxs(F,{className:"text-center",children:[s.jsx(S,{className:"text-2xl font-headline",children:"로그인"}),s.jsx(v,{children:"기존 계정으로 로그인하세요."})]}),s.jsxs(L,{className:"space-y-4",children:[s.jsx(B,{...t,children:s.jsxs("form",{onSubmit:t.handleSubmit(g),className:"space-y-4",children:[s.jsx(m,{control:t.control,name:"email",render:({field:e})=>s.jsxs(d,{children:[s.jsx(u,{children:"이메일"}),s.jsx(x,{children:s.jsx(h,{placeholder:"name@example.com",autoComplete:"email",...e})}),s.jsx(p,{})]})}),s.jsx(m,{control:t.control,name:"password",render:({field:e})=>s.jsxs(d,{children:[s.jsx(u,{children:"비밀번호"}),s.jsx(x,{children:s.jsx(h,{type:"password",autoComplete:"current-password",...e})}),s.jsx(p,{})]})}),s.jsx(k,{type:"submit",className:"w-full",size:"xl",disabled:i,children:i?"로그인 중...":"로그인"})]})}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["계정이 없으신가요?"," ",s.jsx(E,{className:"text-primary underline underline-offset-4",to:"/signup",children:"회원가입"})]})]})]})})}export{H as default};
